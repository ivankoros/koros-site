import React, { useEffect, useState } from 'react';
import SideDock from '../media/dock.svg'

/**
 * <rect xmlns="http://www.w3.org/2000/svg" class="cls-4" x="253.06" y="20.98" width="8.7" height="12.55" rx="4.35" transform="translate(1.91 -14.23) rotate(3.18)"/>
 */

interface DockProps {
    eye: 'open' | 'closed' | string;
}

const DockPropsMap: Record<string, string> = {
    open: '12.55',
    closed: '6.5'
}

const PunPun = (props: DockProps) => {
    
        const delay = (ms: number) => new Promise(
            resolve => setTimeout(resolve, ms)
        )

        const [eyeWidth, setEyeWidth] = useState(DockPropsMap.open);

        useEffect(() => {
            const randomInterval = () => Math.floor(Math.random() * (15000) + 3000);
            async function blink() {
                setEyeWidth((prevWidth) =>
                prevWidth === DockPropsMap.open ? DockPropsMap.closed : DockPropsMap.open
                );

                await delay(240);

                setEyeWidth((prevWidth) =>
                    prevWidth === DockPropsMap.open ? DockPropsMap.closed : DockPropsMap.open
                );

            }

            setInterval(() => {
            blink();
            }, randomInterval());

        }, []);



    return(
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 295.63 214.41">
    <g id="bb4ffcf5-1f41-45f3-ad08-dfc751bc5ef0" data-name="Layer 2">
        <g id="a59bbc2b-593e-40aa-ab11-ba491407a113" data-name="Layer 1">
        <path fill="#22272c" d="M227 116.5a82.48 82.48 0 0 1-11.77 54.5 78.75 78.75 0 0 1-9.79 12.69c-2.05 2.17 1.22 5.46 3.28 3.28a87.43 87.43 0 0 0 23.47-54.43 84.78 84.78 0 0 0-.74-17.22 2.33 2.33 0 0 0-2.86-1.62 2.37 2.37 0 0 0-1.59 2.8Z"/>
        <path fill="#22272c" d="M207.47 182.69a45 45 0 0 0-14.13 2.84 2.37 2.37 0 0 0-1.62 2.85 2.35 2.35 0 0 0 2.86 1.62 43.32 43.32 0 0 1 6.51-1.9l1.61-.3.87-.14a1.74 1.74 0 0 1 .39 0c1.16-.14 2.33-.23 3.51-.28a2.32 2.32 0 0 0 0-4.64Z"/>
        <path fill="#22272c" d="M204.87 184.77a6.27 6.27 0 0 1-.73 1c.11-.11.33-.41.09-.12l-.2.24-.42.48c-.28.29-.56.57-.86.84l-.48.42-.24.2c-.31.25.34-.26.11-.09a16.66 16.66 0 0 1-2.09 1.31l-.57.27-.23.11c.63-.31.23-.1.08 0-.39.15-.79.29-1.2.41a2.32 2.32 0 1 0 1.24 4.47 17.1 17.1 0 0 0 9.51-7.2 2.34 2.34 0 0 0-.84-3.17 2.37 2.37 0 0 0-3.17.83Z"/>
        <path fill="#22272c" d="M204.86 186.46c-.1-.7 0 .06 0 .2v3.63q.06-.48 0-.21a20.17 20.17 0 0 1-.48 2.18c-.11.37-.23.74-.36 1.1a2 2 0 0 0-.18.46c.13-.3.14-.33 0-.1l-.14.3a2.53 2.53 0 0 0-.23 1.79 2.39 2.39 0 0 0 1.06 1.39 2.36 2.36 0 0 0 3.18-.83 19.15 19.15 0 0 0 1.61-5.22 20.32 20.32 0 0 0 0-5.93 2.26 2.26 0 0 0-1.06-1.38 2.31 2.31 0 0 0-3.18.83 2.75 2.75 0 0 0-.23 1.79ZM265.73 131a82.51 82.51 0 0 1-4.16 55.78 81.63 81.63 0 0 1-8.19 14.18 2.35 2.35 0 0 0 .84 3.18 2.37 2.37 0 0 0 3.17-.84 87 87 0 0 0 15.78-56.6 84.59 84.59 0 0 0-3-16.93c-.81-2.87-5.29-1.65-4.47 1.23Z"/>
        <path fill="#22272c" d="M255.12 199.54a44.83 44.83 0 0 0-13.57 4.79 2.33 2.33 0 0 0-.83 3.17 2.36 2.36 0 0 0 3.17.84c1-.57 2.08-1.09 3.16-1.56l.31-.14.87-.35c.51-.2 1-.39 1.54-.57a42.67 42.67 0 0 1 6.58-1.7 2.34 2.34 0 0 0 1.62-2.86 2.37 2.37 0 0 0-2.85-1.62Z"/>
        <path fill="#22272c" d="M253.27 201.61a15.22 15.22 0 0 1-1.67 2.77l.36-.46a15.45 15.45 0 0 1-2.68 2.68l.47-.37a14.65 14.65 0 0 1-2.87 1.72 2.33 2.33 0 0 0-1.07 1.39 2.43 2.43 0 0 0 .23 1.79 2.35 2.35 0 0 0 1.39 1.06 2.65 2.65 0 0 0 1.79-.23 16.52 16.52 0 0 0 8-8 2.54 2.54 0 0 0 .24-1.79 2.4 2.4 0 0 0-1.07-1.39 2.35 2.35 0 0 0-3.17.83Z"/>
        <path fill="#22272c" d="M253.24 203.27a9.92 9.92 0 0 1 .48 2.21v1.91c0 .38 0 .75-.05 1.13 0 .17 0 .35-.05.52 0 .49.08-.46 0 .16a16.51 16.51 0 0 1-.53 2.29 2.34 2.34 0 0 0 1.62 2.85 2.36 2.36 0 0 0 2.86-1.62 19.11 19.11 0 0 0 .09-10.68 2.32 2.32 0 0 0-4.48 1.23Z"/>
        <path fill="#f2f8ee" d="M245.3 166.73c-25.31-1.41-49.27-18.29-44-36 6.26-21 22.86-39.49 15.57-86.08C212.92 19.19 235.19-1 254.56 0c19.37 1.08 39.3 43.93 40.6 68.75a440.67 440.67 0 0 1-2.17 67c-.99 18.53-22.38 32.39-47.69 30.98Z"/>
        <path fill="#f2f8ee" d="m195.46 29.32 32.22 24.51 8.13-27.81-40.35 3.3z"/>
        <rect className='transition-all delay-50' width="8.7" height={eyeWidth} x="253.06" y="20.98" fill="#010101" rx="4.35" transform="rotate(3.18 257.279 27.29)" id='pun_eye'/>
        <path fill="#81c4be" d="M7.58 42c1.85-1.05 3.74-2.06 5.65-3 .89-.44 1.79-.87 2.7-1.28l1.35-.62.59-.26s1.19-.51.57-.25.24-.1.38-.15l.59-.25 1.39-.55c1-.38 2-.76 3-1.12q3-1.08 6.06-2a125 125 0 0 1 12.22-3c2-.38 4.07-.71 6.11-1 1-.14.12 0-.07 0l.85-.1 1.28-.16c1.13-.13 2.27-.25 3.41-.35a144.33 144.33 0 0 1 25.29 0c2.06.18 4.12.43 6.18.67.78.1-.83-.12-.06 0l.64.08 1.48.22a166.9 166.9 0 0 1 16.04 3.3 189.64 189.64 0 0 1 24.55 8.22l1.22.5c.9.38.2.09 0 0l.81.35c1 .43 2 .87 3 1.33q2.91 1.3 5.79 2.7c3.9 1.88 7.76 3.88 11.55 6 7.6 4.2 15 8.78 22.17 13.66q5.7 3.88 11.24 8 2.82 2.09 5.6 4.22l.56.42.41.32c-.41-.31.2.16.23.18l.74.58c.92.71 1.84 1.44 2.75 2.16 14.43 11.43 28.17 23.69 41.83 36l5 4.55c1.95 1.77 5.21 2.07 7.11 0s2.09-5.23 0-7.12C234 101.66 220.1 89.1 205.56 77.3s-29.43-22.71-45.49-32a220.61 220.61 0 0 0-48.89-21.4A158.33 158.33 0 0 0 59 17.44 129.29 129.29 0 0 0 8.15 30.26c-1.91.95-3.8 1.95-5.65 3A5 5 0 1 0 7.58 42Z"/>
        <rect width="11.03" height="29.56" x="229.89" y="94.33" fill="#5b8e8a" rx="4.96" transform="rotate(-48.25 235.43 109.11)"/>
        <rect width="14.38" height="7.04" x="238.84" y="115.67" fill="#1c3557" rx="2.76" transform="rotate(-49.31 246.025 119.19)"/>
        <rect width="14.38" height="7.04" x="216.61" y="95.93" fill="#1c3557" rx="2.76" transform="rotate(-49.31 223.801 99.453)"/>
        <path fill="#f2f8ee" d="M201.41 84.41a31.44 31.44 0 0 1-37.79-27.66.72.72 0 0 0-1.08-.62 29.37 29.37 0 0 1-22.08 2.72 28.56 28.56 0 0 1-16.64-12.69 29.19 29.19 0 0 1-4-10.94c-.09-.64-1-.65-1.31-.17a25.64 25.64 0 0 1-19.6 12.07A24.58 24.58 0 0 1 78 38a25 25 0 0 1-5.43-12.24.72.72 0 0 0-1.2-.32C66 32.26 59.49 38.54 51.45 42.13a29.6 29.6 0 0 1-23.31.72 21.6 21.6 0 0 1-10-8.23c-.5-.78-1.74-.06-1.24.73C21.23 42.18 29 45.8 37 46.3c8.87.57 17.29-3 24.19-8.41A65.32 65.32 0 0 0 72.4 26.43l-1.2-.32a27 27 0 0 0 14.22 19.71 26 26 0 0 0 24.07-.37 26.32 26.32 0 0 0 10.29-9.68l-1.31-.17a30.68 30.68 0 0 0 10.63 18.87 29.92 29.92 0 0 0 21.56 6.75 30.59 30.59 0 0 0 12.6-3.85l-1.08-.62a32.83 32.83 0 0 0 39.61 29c.9-.19.52-1.57-.38-1.38Z"/>
        <path fill="#f2f8ee" d="M16.35 34a475.13 475.13 0 0 1 6.83 82.24q0 11.52-.65 23c-.05.92 1.39.92 1.44 0a476.88 476.88 0 0 0-2.86-82.68q-1.41-11.52-3.38-23c-.15-.91-1.54-.52-1.38.39Z"/>
        <circle cx="23.73" cy="145.23" r="5.99" fill="none" stroke="#f2f8ee" stroke-miterlimit="10" stroke-width="1.92"/>
        <path fill="#f2f8ee" d="m23.63 151-.12 9a.72.72 0 0 0 1.43 0l.13-9a.72.72 0 0 0-1.44 0Z"/>
        <path fill="#22272c" d="m23.64 158.59-.57 7.21c-.14 1.82 0 4.26-1.65 5.47a3.41 3.41 0 0 1-4.26-.08 3.52 3.52 0 0 1-.59-4.31.72.72 0 0 0-1.24-.73 4.82 4.82 0 0 0 3.27 7.21 5 5 0 0 0 4.29-1.48c1.32-1.43 1.41-3.44 1.56-5.27l.63-8c.07-.93-1.37-.92-1.44 0Z"/>
        <path fill="#22272c" d="m15.21 166.32-3.72 6a.71.71 0 0 0 .18.92.74.74 0 0 0 .95-.05l3.11-2.53a.72.72 0 0 0 0-1 .73.73 0 0 0-1 0l-3.12 2.53 1.13.87 3.72-6c.49-.79-.76-1.51-1.24-.72Z"/>
        </g>
    </g>
    </svg>
)
}


function Dock() {

    const [eye, setEye] = useState('open')

    useEffect(() => {
        const interval = setInterval(() => {
            setEye('close')
            setTimeout(() => {
                setEye('open')
            }
            , 200);

        }, 3000);
        return () => clearInterval(interval);
        }, []);



    return(
    <div className="absolute right-0 bottom-0 w-1/4 min-w-[400px] max-w-[450px] overflow-visible">
        <div className='flex flex-col flex-auto -space-y-28'>

        

        <div className='z-10 -translate-x-24'>
        {/* <img src={PunPun} alt="punpun" className=""/> */}
        <PunPun eye={eye}/>

        </div>

    

        <img src={SideDock} alt="dock" className=""/>
        </div>
    </div>
    );
}

export default Dock;
